import { ChartType } from "../../../types";

import { estimateVideoTime } from "../utils";

import { axis, cartesianBar, cartesianLine, revisedVChartType, color, data, legend, pieField, scatterField, wordCloudField, roseField, roseAxis, radarField, radarDisplayConf, radarAxis, sankeyData, sankeyField, sankeyLabel, sankeyLink, sequenceData, rankingBarAxis, rankingBarField, customMark, scatterAxis, wordCloudData, displayConfBar, displayConfLine, colorLine, colorBar, colorDynamicBar, wordCloudDisplayConf, rankingBarLabel, funnelField, funnelData, dualAxisSeries, dualAxisAxes, waterfallField, waterfallAxes, waterfallStackLabel, boxPlotField, boxPlotStyle, theme, liquidField, liquidStyle, linearProgressField, circularProgressField, circularProgressStyle, linearProgressStyle, linearProgressAxes, indicator, bubbleCirclePackingField, bubbleCirclePackingDisplayConf, bubbleCirclePackingData, rangeColumnField, rangeColumnDisplayConf, sunburstData, sunburstDisplayConf, treemapData, sunburstOrTreemapField, treemapDisplayConf, gaugeField, gaugeDisplayConf, arrayData, vennData, vennField, basicHeatMapSeries, basicHeatMapRegion, basicHeatMapColor, basicHeatMapAxes, basicHeatMapLegend, basemap, mapField, mapDisplayConf, registerChart, seriesField, commonLabel, llmChartTypeMap, transposeField } from "./transformers";

const pipelineBar = [ revisedVChartType, data, colorBar, cartesianBar, seriesField, axis, legend, displayConfBar, transposeField, theme ], pipelineLine = [ revisedVChartType, data, colorLine, cartesianLine, seriesField, axis, legend, displayConfLine, theme ], pipeAreaLine = [ ...pipelineLine ], pipelinePie = [ revisedVChartType, data, color, pieField, legend, commonLabel, theme ], pipelineRankingBar = [ revisedVChartType, sequenceData, colorDynamicBar, rankingBarField, rankingBarAxis, seriesField, customMark, rankingBarLabel, theme ], pipelineWordCloud = [ revisedVChartType, wordCloudData, color, wordCloudField, wordCloudDisplayConf, theme ], pipelineScatterPlot = [ revisedVChartType, data, color, scatterField, scatterAxis, legend, theme ], pipelineFunnel = [ revisedVChartType, funnelData, color, funnelField, legend, commonLabel, theme ], pipelineDualAxis = [ revisedVChartType, data, color, dualAxisSeries, dualAxisAxes, legend, theme ], pipelineRose = [ revisedVChartType, data, color, roseField, roseAxis, legend, commonLabel, theme ], pipelineRadar = [ revisedVChartType, data, color, radarField, radarDisplayConf, radarAxis, legend, theme ], pipelineSankey = [ revisedVChartType, sankeyData, color, sankeyField, sankeyLink, sankeyLabel, legend, theme ], pipelineWaterfall = [ revisedVChartType, data, color, waterfallField, waterfallAxes, waterfallStackLabel, legend, theme ], pipelineBoxPlot = [ revisedVChartType, data, color, boxPlotField, boxPlotStyle, legend, theme ], pipelineLiquid = [ revisedVChartType, data, color, liquidField, liquidStyle, indicator, theme ], pipelineLinearProgress = [ revisedVChartType, data, color, linearProgressField, linearProgressAxes, linearProgressStyle, theme ], pipelineCircularProgress = [ revisedVChartType, data, color, circularProgressField, circularProgressStyle, indicator, theme ], pipelineBubbleCirclePacking = [ revisedVChartType, bubbleCirclePackingData, data, color, bubbleCirclePackingField, bubbleCirclePackingDisplayConf, theme ], pipelineMapChart = [ revisedVChartType, basemap, color, arrayData, mapField, mapDisplayConf, theme ], pipelineRangeColumn = [ revisedVChartType, data, color, rangeColumnField, rangeColumnDisplayConf, theme ], pipelineSunburst = [ revisedVChartType, sunburstData, color, sunburstOrTreemapField, sunburstDisplayConf, theme ], pipelineTreemap = [ revisedVChartType, treemapData, color, sunburstOrTreemapField, treemapDisplayConf, theme ], pipelineGauge = [ revisedVChartType, arrayData, color, gaugeField, gaugeDisplayConf, theme ], pipelineBasicHeatMap = [ revisedVChartType, arrayData, color, basicHeatMapSeries, basicHeatMapRegion, basicHeatMapColor, basicHeatMapAxes, basicHeatMapLegend, theme ], pipelineVenn = [ revisedVChartType, registerChart, vennData, color, vennField, legend, theme ], pipelineMap = {
    [ChartType.BarChart.toUpperCase()]: pipelineBar,
    [ChartType.LineChart.toUpperCase()]: pipelineLine,
    [ChartType.AreaChart.toUpperCase()]: pipeAreaLine,
    [ChartType.PieChart.toUpperCase()]: pipelinePie,
    [ChartType.WordCloud.toUpperCase()]: pipelineWordCloud,
    [ChartType.ScatterPlot.toUpperCase()]: pipelineScatterPlot,
    [ChartType.DynamicBarChart.toUpperCase()]: pipelineRankingBar,
    [ChartType.FunnelChart.toUpperCase()]: pipelineFunnel,
    [ChartType.DualAxisChart.toUpperCase()]: pipelineDualAxis,
    [ChartType.RoseChart.toUpperCase()]: pipelineRose,
    [ChartType.RadarChart.toUpperCase()]: pipelineRadar,
    [ChartType.SankeyChart.toUpperCase()]: pipelineSankey,
    [ChartType.WaterFallChart.toUpperCase()]: pipelineWaterfall,
    [ChartType.BoxPlot.toUpperCase()]: pipelineBoxPlot,
    [ChartType.LiquidChart.toUpperCase()]: pipelineLiquid,
    [ChartType.LinearProgress.toUpperCase()]: pipelineLinearProgress,
    [ChartType.CircularProgress.toUpperCase()]: pipelineCircularProgress,
    [ChartType.BubbleCirclePacking.toUpperCase()]: pipelineBubbleCirclePacking,
    [ChartType.MapChart.toUpperCase()]: pipelineMapChart,
    [ChartType.RangeColumnChart.toUpperCase()]: pipelineRangeColumn,
    [ChartType.SunburstChart.toUpperCase()]: pipelineSunburst,
    [ChartType.TreemapChart.toUpperCase()]: pipelineTreemap,
    [ChartType.Gauge.toUpperCase()]: pipelineGauge,
    [ChartType.BasicHeatMap.toUpperCase()]: pipelineBasicHeatMap,
    [ChartType.VennChart.toUpperCase()]: pipelineVenn
}, beforePipe = () => ({
    spec: {}
}), afterPipe = context => {
    const {spec: spec, chartType: chartType, totalTime: totalTime} = context;
    return {
        spec: spec,
        chartType: llmChartTypeMap[chartType],
        time: estimateVideoTime(chartType, spec, totalTime ? 1e3 * totalTime : void 0)
    };
};

export const getChartSpecWithContext = context => {
    const {chartType: chartType} = context, chartSpecPipelines = [ beforePipe, ...pipelineMap[chartType.toUpperCase()], afterPipe ];
    let newContext = Object.assign({}, context);
    return chartSpecPipelines.forEach((func => {
        newContext = Object.assign(Object.assign({}, newContext), func(newContext));
    })), newContext;
};
//# sourceMappingURL=index.js.map
