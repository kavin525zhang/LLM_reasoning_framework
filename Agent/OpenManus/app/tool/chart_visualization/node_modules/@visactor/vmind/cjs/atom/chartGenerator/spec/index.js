"use strict";

Object.defineProperty(exports, "__esModule", {
    value: !0
}), exports.getChartSpecWithContext = void 0;

const types_1 = require("../../../types"), utils_1 = require("../utils"), transformers_1 = require("./transformers"), pipelineBar = [ transformers_1.revisedVChartType, transformers_1.data, transformers_1.colorBar, transformers_1.cartesianBar, transformers_1.seriesField, transformers_1.axis, transformers_1.legend, transformers_1.displayConfBar, transformers_1.transposeField, transformers_1.theme ], pipelineLine = [ transformers_1.revisedVChartType, transformers_1.data, transformers_1.colorLine, transformers_1.cartesianLine, transformers_1.seriesField, transformers_1.axis, transformers_1.legend, transformers_1.displayConfLine, transformers_1.theme ], pipeAreaLine = [ ...pipelineLine ], pipelinePie = [ transformers_1.revisedVChartType, transformers_1.data, transformers_1.color, transformers_1.pieField, transformers_1.legend, transformers_1.commonLabel, transformers_1.theme ], pipelineRankingBar = [ transformers_1.revisedVChartType, transformers_1.sequenceData, transformers_1.colorDynamicBar, transformers_1.rankingBarField, transformers_1.rankingBarAxis, transformers_1.seriesField, transformers_1.customMark, transformers_1.rankingBarLabel, transformers_1.theme ], pipelineWordCloud = [ transformers_1.revisedVChartType, transformers_1.wordCloudData, transformers_1.color, transformers_1.wordCloudField, transformers_1.wordCloudDisplayConf, transformers_1.theme ], pipelineScatterPlot = [ transformers_1.revisedVChartType, transformers_1.data, transformers_1.color, transformers_1.scatterField, transformers_1.scatterAxis, transformers_1.legend, transformers_1.theme ], pipelineFunnel = [ transformers_1.revisedVChartType, transformers_1.funnelData, transformers_1.color, transformers_1.funnelField, transformers_1.legend, transformers_1.commonLabel, transformers_1.theme ], pipelineDualAxis = [ transformers_1.revisedVChartType, transformers_1.data, transformers_1.color, transformers_1.dualAxisSeries, transformers_1.dualAxisAxes, transformers_1.legend, transformers_1.theme ], pipelineRose = [ transformers_1.revisedVChartType, transformers_1.data, transformers_1.color, transformers_1.roseField, transformers_1.roseAxis, transformers_1.legend, transformers_1.commonLabel, transformers_1.theme ], pipelineRadar = [ transformers_1.revisedVChartType, transformers_1.data, transformers_1.color, transformers_1.radarField, transformers_1.radarDisplayConf, transformers_1.radarAxis, transformers_1.legend, transformers_1.theme ], pipelineSankey = [ transformers_1.revisedVChartType, transformers_1.sankeyData, transformers_1.color, transformers_1.sankeyField, transformers_1.sankeyLink, transformers_1.sankeyLabel, transformers_1.legend, transformers_1.theme ], pipelineWaterfall = [ transformers_1.revisedVChartType, transformers_1.data, transformers_1.color, transformers_1.waterfallField, transformers_1.waterfallAxes, transformers_1.waterfallStackLabel, transformers_1.legend, transformers_1.theme ], pipelineBoxPlot = [ transformers_1.revisedVChartType, transformers_1.data, transformers_1.color, transformers_1.boxPlotField, transformers_1.boxPlotStyle, transformers_1.legend, transformers_1.theme ], pipelineLiquid = [ transformers_1.revisedVChartType, transformers_1.data, transformers_1.color, transformers_1.liquidField, transformers_1.liquidStyle, transformers_1.indicator, transformers_1.theme ], pipelineLinearProgress = [ transformers_1.revisedVChartType, transformers_1.data, transformers_1.color, transformers_1.linearProgressField, transformers_1.linearProgressAxes, transformers_1.linearProgressStyle, transformers_1.theme ], pipelineCircularProgress = [ transformers_1.revisedVChartType, transformers_1.data, transformers_1.color, transformers_1.circularProgressField, transformers_1.circularProgressStyle, transformers_1.indicator, transformers_1.theme ], pipelineBubbleCirclePacking = [ transformers_1.revisedVChartType, transformers_1.bubbleCirclePackingData, transformers_1.data, transformers_1.color, transformers_1.bubbleCirclePackingField, transformers_1.bubbleCirclePackingDisplayConf, transformers_1.theme ], pipelineMapChart = [ transformers_1.revisedVChartType, transformers_1.basemap, transformers_1.color, transformers_1.arrayData, transformers_1.mapField, transformers_1.mapDisplayConf, transformers_1.theme ], pipelineRangeColumn = [ transformers_1.revisedVChartType, transformers_1.data, transformers_1.color, transformers_1.rangeColumnField, transformers_1.rangeColumnDisplayConf, transformers_1.theme ], pipelineSunburst = [ transformers_1.revisedVChartType, transformers_1.sunburstData, transformers_1.color, transformers_1.sunburstOrTreemapField, transformers_1.sunburstDisplayConf, transformers_1.theme ], pipelineTreemap = [ transformers_1.revisedVChartType, transformers_1.treemapData, transformers_1.color, transformers_1.sunburstOrTreemapField, transformers_1.treemapDisplayConf, transformers_1.theme ], pipelineGauge = [ transformers_1.revisedVChartType, transformers_1.arrayData, transformers_1.color, transformers_1.gaugeField, transformers_1.gaugeDisplayConf, transformers_1.theme ], pipelineBasicHeatMap = [ transformers_1.revisedVChartType, transformers_1.arrayData, transformers_1.color, transformers_1.basicHeatMapSeries, transformers_1.basicHeatMapRegion, transformers_1.basicHeatMapColor, transformers_1.basicHeatMapAxes, transformers_1.basicHeatMapLegend, transformers_1.theme ], pipelineVenn = [ transformers_1.revisedVChartType, transformers_1.registerChart, transformers_1.vennData, transformers_1.color, transformers_1.vennField, transformers_1.legend, transformers_1.theme ], pipelineMap = {
    [types_1.ChartType.BarChart.toUpperCase()]: pipelineBar,
    [types_1.ChartType.LineChart.toUpperCase()]: pipelineLine,
    [types_1.ChartType.AreaChart.toUpperCase()]: pipeAreaLine,
    [types_1.ChartType.PieChart.toUpperCase()]: pipelinePie,
    [types_1.ChartType.WordCloud.toUpperCase()]: pipelineWordCloud,
    [types_1.ChartType.ScatterPlot.toUpperCase()]: pipelineScatterPlot,
    [types_1.ChartType.DynamicBarChart.toUpperCase()]: pipelineRankingBar,
    [types_1.ChartType.FunnelChart.toUpperCase()]: pipelineFunnel,
    [types_1.ChartType.DualAxisChart.toUpperCase()]: pipelineDualAxis,
    [types_1.ChartType.RoseChart.toUpperCase()]: pipelineRose,
    [types_1.ChartType.RadarChart.toUpperCase()]: pipelineRadar,
    [types_1.ChartType.SankeyChart.toUpperCase()]: pipelineSankey,
    [types_1.ChartType.WaterFallChart.toUpperCase()]: pipelineWaterfall,
    [types_1.ChartType.BoxPlot.toUpperCase()]: pipelineBoxPlot,
    [types_1.ChartType.LiquidChart.toUpperCase()]: pipelineLiquid,
    [types_1.ChartType.LinearProgress.toUpperCase()]: pipelineLinearProgress,
    [types_1.ChartType.CircularProgress.toUpperCase()]: pipelineCircularProgress,
    [types_1.ChartType.BubbleCirclePacking.toUpperCase()]: pipelineBubbleCirclePacking,
    [types_1.ChartType.MapChart.toUpperCase()]: pipelineMapChart,
    [types_1.ChartType.RangeColumnChart.toUpperCase()]: pipelineRangeColumn,
    [types_1.ChartType.SunburstChart.toUpperCase()]: pipelineSunburst,
    [types_1.ChartType.TreemapChart.toUpperCase()]: pipelineTreemap,
    [types_1.ChartType.Gauge.toUpperCase()]: pipelineGauge,
    [types_1.ChartType.BasicHeatMap.toUpperCase()]: pipelineBasicHeatMap,
    [types_1.ChartType.VennChart.toUpperCase()]: pipelineVenn
}, beforePipe = () => ({
    spec: {}
}), afterPipe = context => {
    const {spec: spec, chartType: chartType, totalTime: totalTime} = context;
    return {
        spec: spec,
        chartType: transformers_1.llmChartTypeMap[chartType],
        time: (0, utils_1.estimateVideoTime)(chartType, spec, totalTime ? 1e3 * totalTime : void 0)
    };
}, getChartSpecWithContext = context => {
    const {chartType: chartType} = context, chartSpecPipelines = [ beforePipe, ...pipelineMap[chartType.toUpperCase()], afterPipe ];
    let newContext = Object.assign({}, context);
    return chartSpecPipelines.forEach((func => {
        newContext = Object.assign(Object.assign({}, newContext), func(newContext));
    })), newContext;
};

exports.getChartSpecWithContext = getChartSpecWithContext;
//# sourceMappingURL=index.js.map
